<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FH Development</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        nav {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 600;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #119eec;
        }

        .logo {
            height: 40px;
            margin-right: auto;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .bubble {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 2rem 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .hero {
            text-align: center;
            padding: 3rem 0;
            color: white;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .reviews {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .review {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stars {
            color: #ffd700;
            font-size: 1.5rem;
            margin: 0.5rem 0;
        }

        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .staff-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .staff-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #119eec;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }

        .sponsor-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .sponsor-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .sponsor-card:hover {
            transform: translateY(-5px);
        }

        .sponsor-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #119eec;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .btn {
            background: #119eec;
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: #0d7ec0;
            transform: scale(1.05);
        }

        .signin-box {
            background: white;
            max-width: 400px;
            margin: 3rem auto;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .discord-btn {
            background: #5865F2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }

        .discord-btn:hover {
            background: #4752C4;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .product-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .price {
            color: #119eec;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        footer {
            background: rgba(0,0,0,0.3);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .hidden {
            display: none;
        }

        .account-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 1rem 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .input-group {
            margin: 1rem 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
        }

        .status {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <img src="logo.png" alt="FH Development" class="logo" onerror="this.style.display='none'">
            <li><a href="#" onclick="showPage('home')">Home</a></li>
            <li><a href="#" onclick="showPage('staff')">Staff</a></li>
            <li><a href="#" onclick="showPage('sponsors')">Sponsors</a></li>
            <li><a href="#" onclick="showPage('signin')">Sign In</a></li>
            <li class="hidden" id="nav-account"><a href="#" onclick="showPage('account')">Account</a></li>
            <li class="hidden" id="nav-products"><a href="#" onclick="showPage('products')">Products</a></li>
            <li class="hidden" id="nav-support"><a href="#" onclick="showPage('support')">Support</a></li>
        </ul>
    </nav>

    <!-- HOME PAGE -->
    <div id="page-home" class="page">
        <div class="hero">
            <h1>FH Development</h1>
            <p>Your trusted partner for Roblox development solutions</p>
        </div>
        <div class="container">
            <div class="bubble">
                <h2>Welcome to FH Development</h2>
                <p>We provide high-quality Roblox moderation and utility commands to enhance your game experience. Our products are designed with performance and ease of use in mind.</p>
            </div>
            <div class="bubble">
                <h2>Why Choose Us?</h2>
                <p>Professional development, reliable support, and affordable pricing. We're committed to helping your Roblox game succeed with our premium tools and commands.</p>
            </div>
            <div class="reviews">
                <div class="review">
                    <h3>John D.</h3>
                    <div class="stars">★★★★★</div>
                    <p>"Excellent products! The auto moderation system saved my game from spam and abuse. Highly recommended for any serious developer."</p>
                </div>
                <div class="review">
                    <h3>Sarah M.</h3>
                    <div class="stars">★★★★★</div>
                    <p>"Amazing support and great quality commands. The music system is exactly what I needed. Worth every Robux!"</p>
                </div>
            </div>
        </div>
    </div>

    <!-- STAFF PAGE -->
    <div id="page-staff" class="page hidden">
        <div class="container">
            <h1 style="color: white; text-align: center; margin: 2rem 0;">Our Team</h1>
            <div class="staff-grid">
                <div class="staff-card">
                    <div class="staff-avatar">FH</div>
                    <h3>Founder</h3>
                    <p>Lead Developer & CEO</p>
                    <p style="margin-top: 1rem; color: #666;">Creating amazing Roblox experiences since 2020</p>
                </div>
                <div class="staff-card">
                    <div class="staff-avatar">DV</div>
                    <h3>Developer</h3>
                    <p>Senior Developer</p>
                    <p style="margin-top: 1rem; color: #666;">Specializing in command systems and optimization</p>
                </div>
                <div class="staff-card">
                    <div class="staff-avatar">SP</div>
                    <h3>Support Lead</h3>
                    <p>Customer Support</p>
                    <p style="margin-top: 1rem; color: #666;">Here to help with any questions or issues</p>
                </div>
            </div>
        </div>
    </div>

    <!-- SPONSORS PAGE -->
    <div id="page-sponsors" class="page hidden">
        <div class="container">
            <h1 style="color: white; text-align: center; margin: 2rem 0;">Our Sponsors</h1>
            <div class="sponsor-list">
                <div class="sponsor-card">
                    <div class="sponsor-logo">RC</div>
                    <h3>Roblox Corp</h3>
                    <p><strong>Owner:</strong> David B.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
                <div class="sponsor-card">
                    <div class="sponsor-logo">GS</div>
                    <h3>Game Studios</h3>
                    <p><strong>Owner:</strong> Mike T.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
                <div class="sponsor-card">
                    <div class="sponsor-logo">DS</div>
                    <h3>Dev Solutions</h3>
                    <p><strong>Owner:</strong> Emma W.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
                <div class="sponsor-card">
                    <div class="sponsor-logo">PG</div>
                    <h3>Pro Gaming</h3>
                    <p><strong>Owner:</strong> Alex K.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
                <div class="sponsor-card">
                    <div class="sponsor-logo">TC</div>
                    <h3>Tech Creators</h3>
                    <p><strong>Owner:</strong> Lisa R.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
                <div class="sponsor-card">
                    <div class="sponsor-logo">RD</div>
                    <h3>Roblox Devs</h3>
                    <p><strong>Owner:</strong> Tom S.</p>
                    <a href="#" class="btn" style="margin-top: 1rem; font-size: 0.9rem;">Visit</a>
                </div>
            </div>
        </div>
    </div>

    <!-- SIGN IN PAGE -->
    <div id="page-signin" class="page hidden">
        <div class="container">
            <div class="signin-box">
                <h2 style="margin-bottom: 1rem;">Sign In</h2>
                <p style="margin-bottom: 2rem; color: #666;">Sign in with Discord to access your account</p>
                <button class="btn discord-btn" onclick="signInWithDiscord()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                    Sign in with Discord
                </button>
            </div>
        </div>
    </div>

    <!-- ACCOUNT PAGE -->
    <div id="page-account" class="page hidden">
        <div class="container">
            <h1 style="color: white; text-align: center; margin: 2rem 0;">Account Management</h1>
            <div class="account-section">
                <h2>Discord Account</h2>
                <div id="discord-info" class="user-info"></div>
            </div>
            <div class="account-section">
                <h2>Roblox Account</h2>
                <div id="roblox-status"></div>
                <div id="roblox-link-form">
                    <div class="input-group">
                        <label>Roblox Username</label>
                        <input type="text" id="roblox-username" placeholder="Enter your Roblox username">
                    </div>
                    <div class="input-group">
                        <label>Roblox User ID</label>
                        <input type="text" id="roblox-userid" placeholder="Enter your Roblox User ID">
                    </div>
                    <button class="btn" onclick="linkRobloxAccount()">Link Roblox Account</button>
                </div>
                <div id="roblox-info" class="user-info hidden"></div>
            </div>
        </div>
    </div>

    <!-- PRODUCTS PAGE -->
    <div id="page-products" class="page hidden">
        <div class="container">
            <h1 style="color: white; text-align: center; margin: 2rem 0;">Our Products</h1>
            <div class="product-grid">
                <div class="product-card">
                    <h3>Auto Moderation</h3>
                    <p class="price">150 R$</p>
                    <p>Automatically moderate your game with advanced filters and spam protection. Keep your community safe and clean.</p>
                    <button class="btn" onclick="purchaseProduct(3435548665, 'Auto Moderation')">Buy Now</button>
                </div>
                <div class="product-card">
                    <h3>Goto Commands</h3>
                    <p class="price">100 R$</p>
                    <p>Teleport to players and locations with ease. Essential for game administrators and moderators.</p>
                    <button class="btn" onclick="purchaseProduct(3435529457, 'Goto Commands')">Buy Now</button>
                </div>
                <div class="product-card">
                    <h3>Music Commands</h3>
                    <p class="price">75 R$</p>
                    <p>Add music control to your game. Play, pause, skip, and control volume with simple commands.</p>
                    <button class="btn" onclick="purchaseProduct(3435533076, 'Music Commands')">Buy Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SUPPORT PAGE -->
    <div id="page-support" class="page hidden">
        <div class="container">
            <div class="signin-box">
                <h2 style="margin-bottom: 1rem;">Need Help?</h2>
                <p style="margin-bottom: 2rem; color: #666;">Join our Discord server for support and assistance</p>
                <a href="https://discord.gg/3A8kakMmtt" target="_blank" class="btn discord-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                    Join Discord Server
                </a>
            </div>
        </div>
    </div>

    <footer>
        Made with ❤️ in Lincolnshire
    </footer>

    <script>
        const CLIENT_ID = '1432365276078542878';
        const REDIRECT_URI = 'https://fisteywol.github.io/fh-development/';
        const DISCORD_API = 'https://discord.com/api/v10';
        
        let userData = {
            discord: null,
            roblox: null,
            products: []
        };

        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(`page-${page}`).classList.remove('hidden');
        }

        function signInWithDiscord() {
            const scope = 'identify';
            const authUrl = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=${scope}`;
            window.location.href = authUrl;
        }

        async function handleDiscordCallback() {
            const fragment = window.location.hash.substring(1);
            const params = new URLSearchParams(fragment);
            const token = params.get('access_token');

            if (token) {
                try {
                    const response = await fetch(`${DISCORD_API}/users/@me`, {
                        headers: { Authorization: `Bearer ${token}` }
                    });
                    const user = await response.json();
                    
                    userData.discord = {
                        id: user.id,
                        username: user.username,
                        discriminator: user.discriminator,
                        avatar: `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`
                    };

                    await saveUserData();
                    await loadUserData();
                    showLoggedInUI();
                    window.location.hash = '';
                    showPage('account');
                } catch (error) {
                    console.error('Discord auth error:', error);
                    alert('Failed to sign in with Discord. Please try again.');
                }
            }
        }

        async function saveUserData() {
            // Store user data in memory (localStorage not available in Claude artifacts)
            sessionStorage.setItem('fh_user', JSON.stringify(userData));
        }

        async function loadUserData() {
            const stored = sessionStorage.getItem('fh_user');
            if (stored) {
                userData = JSON.parse(stored);
                if (userData.discord) {
                    showLoggedInUI();
                    updateAccountPage();
                }
            }
        }

        function showLoggedInUI() {
            document.getElementById('nav-account').classList.remove('hidden');
            document.getElementById('nav-products').classList.remove('hidden');
            document.getElementById('nav-support').classList.remove('hidden');
        }

        function updateAccountPage() {
            if (userData.discord) {
                document.getElementById('discord-info').innerHTML = `
                    <img src="${userData.discord.avatar}" class="user-avatar" alt="Avatar">
                    <div>
                        <strong>${userData.discord.username}#${userData.discord.discriminator}</strong>
                        <p style="color: #666;">ID: ${userData.discord.id}</p>
                    </div>
                `;
            }

            if (userData.roblox) {
                document.getElementById('roblox-link-form').classList.add('hidden');
                document.getElementById('roblox-info').classList.remove('hidden');
                document.getElementById('roblox-info').innerHTML = `
                    <div>
                        <strong>${userData.roblox.username}</strong>
                        <p style="color: #666;">ID: ${userData.roblox.userid}</p>
                    </div>
                    <button class="btn" onclick="unlinkRoblox()">Unlink</button>
                `;
                document.getElementById('roblox-status').innerHTML = '<div class="status success">✓ Roblox account linked</div>';
            } else {
                document.getElementById('roblox-status').innerHTML = '<div class="status warning">⚠ No Roblox account linked</div>';
            }
        }

        async function linkRobloxAccount() {
            const username = document.getElementById('roblox-username').value;
            const userid = document.getElementById('roblox-userid').value;

            if (!username || !userid) {
                alert('Please enter both username and user ID');
                return;
            }

            // Show loading state
            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'Verifying...';

            try {
                // First, verify the user exists and username matches ID
                const response = await fetch(`https://users.roblox.com/v1/users/${userid}`);
                
                if (!response.ok) {
                    throw new Error('User not found');
                }
                
                const data = await response.json();

                if (data.name.toLowerCase() === username.toLowerCase()) {
                    // Generate verification code
                    const verificationCode = Math.random().toString(36).substring(2, 8).toUpperCase();
                    
                    // Store verification code
                    sessionStorage.setItem('roblox_verify_code', verificationCode);
                    sessionStorage.setItem('roblox_verify_user', JSON.stringify({ username: data.name, userid: userid }));
                    
                    // Show verification instructions
                    document.getElementById('roblox-link-form').innerHTML = `
                        <div class="status warning">
                            <h3>Verification Required</h3>
                            <p>To verify you own this account, please add the following code to your Roblox profile description:</p>
                            <div style="background: #f0f0f0; padding: 1rem; border-radius: 8px; margin: 1rem 0; font-family: monospace; font-size: 1.2rem; text-align: center;">
                                ${verificationCode}
                            </div>
                            <p>After adding the code to your profile, click "Verify Now" below.</p>
                            <button class="btn" onclick="verifyRobloxCode()">Verify Now</button>
                            <button class="btn" onclick="cancelRobloxVerification()" style="background: #dc3545; margin-left: 1rem;">Cancel</button>
                        </div>
                    `;
                } else {
                    alert('Username and User ID do not match. Please check your details.');
                    btn.disabled = false;
                    btn.textContent = 'Link Roblox Account';
                }
            } catch (error) {
                console.error('Roblox verification error:', error);
                alert('Failed to verify Roblox account. Please make sure the User ID is correct.');
                btn.disabled = false;
                btn.textContent = 'Link Roblox Account';
            }
        }

        async function verifyRobloxCode() {
            const verificationCode = sessionStorage.getItem('roblox_verify_code');
            const verifyUser = JSON.parse(sessionStorage.getItem('roblox_verify_user'));

            if (!verificationCode || !verifyUser) {
                alert('Verification session expired. Please start again.');
                cancelRobloxVerification();
                return;
            }

            try {
                // Fetch user profile description
                const response = await fetch(`https://users.roblox.com/v1/users/${verifyUser.userid}`);
                const data = await response.json();

                // Check if description contains the verification code
                const description = data.description || '';
                
                if (description.includes(verificationCode)) {
                    // Verification successful!
                    userData.roblox = { username: verifyUser.username, userid: verifyUser.userid };
                    await saveUserData();
                    
                    // Clear verification data
                    sessionStorage.removeItem('roblox_verify_code');
                    sessionStorage.removeItem('roblox_verify_user');
                    
                    // Reset form
                    document.getElementById('roblox-link-form').innerHTML = `
                        <div class="input-group">
                            <label>Roblox Username</label>
                            <input type="text" id="roblox-username" placeholder="Enter your Roblox username">
                        </div>
                        <div class="input-group">
                            <label>Roblox User ID</label>
                            <input type="text" id="roblox-userid" placeholder="Enter your Roblox User ID">
                        </div>
                        <button class="btn" onclick="linkRobloxAccount()">Link Roblox Account</button>
                    `;
                    
                    updateAccountPage();
                    alert('Roblox account linked successfully! You can now remove the code from your profile.');
                } else {
                    alert('Verification code not found in your profile description. Please make sure you added it correctly and try again.');
                }
            } catch (error) {
                console.error('Verification error:', error);
                alert('Failed to verify code. Please try again.');
            }
        }

        function cancelRobloxVerification() {
            sessionStorage.removeItem('roblox_verify_code');
            sessionStorage.removeItem('roblox_verify_user');
            
            document.getElementById('roblox-link-form').innerHTML = `
                <div class="input-group">
                    <label>Roblox Username</label>
                    <input type="text" id="roblox-username" placeholder="Enter your Roblox username">
                </div>
                <div class="input-group">
                    <label>Roblox User ID</label>
                    <input type="text" id="roblox-userid" placeholder="Enter your Roblox User ID">
                </div>
                <button class="btn" onclick="linkRobloxAccount()">Link Roblox Account</button>
            `;
        }

        function unlinkRoblox() {
            if (confirm('Are you sure you want to unlink your Roblox account?')) {
                userData.roblox = null;
                document.getElementById('roblox-username').value = '';
                document.getElementById('roblox-userid').value = '';
                saveUserData();
                document.getElementById('roblox-link-form').classList.remove('hidden');
                document.getElementById('roblox-info').classList.add('hidden');
                updateAccountPage();
            }
        }

        async function purchaseProduct(productId, productName) {
            if (!userData.roblox) {
                alert('Please link your Roblox account first!');
                showPage('account');
                return;
            }

            alert(`To purchase ${productName}, please buy the developer product (ID: ${productId}) in-game on Roblox. Once purchased, you'll be able to download the product here.`);

            // Simulate checking ownership (in production, verify via Roblox API)
            setTimeout(() => {
                const confirmed = confirm('Have you completed the purchase? Click OK if you have purchased the product.');
                if (confirmed) {
                    userData.products.push(productId);
                    saveUserData();
                    downloadProduct(productName);
                }
            }, 2000);
        }

        function downloadProduct(productName) {
            const blob = new Blob([`${productName} - Installation Instructions\n\nThank you for your purchase!\n\nThis is a placeholder file. In production, this would be the actual product ZIP file.`], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${productName.replace(/\s+/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert(`${productName} downloaded successfully!`);
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            handleDiscordCallback();
            loadUserData();
        });
    </script>
</body>
</html>